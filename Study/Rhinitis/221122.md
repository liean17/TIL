# 시큐리티+jwt 적용

## Spring Security + JWT + Thymeleaf
스프링 시큐리티는 몇번 써봤다.  
Thymeleaf 템플릿과 세션을 사용해서 로그인을 구현해보기도 했다.  
그리고 JWT를 사용한 로그인도 구현해봤는데  
그 셋을 한번에 사용해본적은 없다.  
템플릿을 사용하는 점 보다도 모든 요청을 알아서 처리해야한다는게 미지의 영역이라 어려운 듯 하다.

---
## 트러블 슈팅
- 로그인 문제  
아이디(이메일)와 비밀번호를 입력하여 로그인을 시도한다.  
PrincipalDetailsService는 로그인 시도를 감지해서 인증객체를 만드는데  
입력한 내용을 전혀 감지하지 못한다.  
> **해결**  
원인은 PrincipalDetailsService의 인터페이스인 UserDetailsService가 'username'이라는 이름의 파라미터만 인식하기 때문이었다.  
나는 회원 가입에서 email을 사용하려고 파라미터 이름도 모두 email로 변경했는데 이를 인식하지 못한것이었다.  

---
### 후기
Spring Security는 할때마다 어렵다  
이번 기회에 다시 공부하는 것은 좋은데 현업에서 쓰게될지는 모르겠다.  
그래도 filter같이 자바, 스프링의 구조를 파악하는것은 좋다.  

