# 메인 프로젝트
## 오늘 할 일
- 시간데이터 받고 출력
- 이미지 받고 출력

---

### 트러블 슈팅
- 엔티티에 List받기  
이전에 엔티티에 객체를 넣기위해서 임베디드를 사용했다 엔티티상으로는 한 컬럼이지만 객체안의 데이터가 나누어서 저장된다.  
이번에는 요일 리스트를 받아야했다.  
각 모임마다 선택된 요일 정보를 받아서 엔티티에 저장해두면 모든 과정이 편해지는데 이것이 불가능하다.  
그래서 처음에는 요일을 숫자로 받아서 dto로 주고 받을때 다시 데이터로 파싱해보려했는데 코드가 매우 길어지는 문제가 있었다.  
찾다보니 나의 생각을 좀 더 편하게 만들어주는 기능이 있었다.  
    - convert
        ```java
        @Converter
        public class StringArrayConverter implements AttributeConverter<List<String>, String> {
            private static final String SPLIT_CHAR = ",";

        @Override
        public String convertToDatabaseColumn(List<String> attribute) {
            return attribute.stream().map(String::valueOf).collect(Collectors.joining(SPLIT_CHAR));
        }

        @Override
        public List<String> convertToEntityAttribute(String dbData) {
            return Arrays.stream(dbData.split(SPLIT_CHAR))
                    .collect(Collectors.toList());
        }
        }
        ```
        컨버팅할 컨버터를 만들고 엔티티에 원하는 타입을 등록한 뒤 @Convert 어노테이션과 컨버터 클래스 이름만 적어주면  
        원하는 형태로 엔티티에 저장되도록 할 수 있다.  
        어디까지나 엔티티에는 기본형만 저장되기때문에 실질적으로는 "1,2,3"같은 형식의 문자열이 저장된다.  
        그리고 데이터를 꺼낼때 컨버터를 통해서 자동으로 변환해준다.

---

### 후기
- 분업  
백엔드 동료분과 프로젝트 분업을 했다.  
나는 작성된 코드의 수정을 맡았고 동료분은 배포와 새로운 기술에 대한 도입을 하시기로 했다.  
코드에 집중할 수 있는건 좋은 일이지만 배포에 약한것은 확실히 좋지않다.  
개인시간을 투자해서 배포도 꾸준히 학습해야한다.

- 강의
추석할인을 기회로 김영한님의 JPA강의를 두개 샀다.  
웹 애플리케이션을 제대로 개발해보지 못했을때는 JPA가 멀게만 느껴지고, 왜 영한님은 내가 지금 급한거 말고 이런부분에 대한 강의를 찍으셨을까 생각했는데  
지금에서는 아주 매일 영한계신 방향으로 감사하다고 절을 해야할 지경이다.  
API설계가 얼마나 복잡한 일인지 이제야 조금 알게되었다. 조금 알게된게 맞을것이다 아마 내생각보다 더 어려울거다.  
단순히 데이터 받아서 넘기면 되는 줄 알았는데 데이터베이스를 고려하게되면 신경써야하는게 많다.  
이번에 멘토분께 조언받은 내용 중 가장 인상깊었던것이 데이터베이스부분이었다.  
같은 데이터를 다른곳에 저장한다거나 기존 데이터를 이용하면 되는것을 새로운 데이터로 만드는 등 비효율적인 부분이 많았다.  
주어진시간에는 메인프로젝트를 열심히 하고, 개인 공부도 빼놓지않고 지속해야겠다. 

---

### 내일 할 일
- 회원의 강아지 등록  
- 회원의 커뮤니티 참여(회원의 강아지를 조회해서 선택한 후 참여시키는 로직)  
일단 강아지를 선택하는 부분에 대한 합의가 필요하다.  
1. 쇼핑몰 구매하듯 강아지를 선택하고 참여버튼을 누르는 방법
2. 참여페이지로 들어간 뒤에 강아지를 고르고 등록하는 방법  
그리고 참여인원은 사람이 아닌 강아지기준이다. 즉 참여견원이다.  
참여하는 페이지에서 멤버의 강아지를 모두 보여출력한다.  
그리고 선택한 강아지의 정보를 받아서  
커뮤니티에 저장한다. 참여견원은 자동 카운팅이 되어야한다.  
참여견원이 꽉차면 모집완료가 되어야한다. - 즉 커뮤니티에 모집상태에 대한 정보도 필요하다!
