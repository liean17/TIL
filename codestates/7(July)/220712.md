# Day 54

## 코드스테이츠

### 1. 학습시간 전
* 오늘 학습목표

    - 테스트를 왜 해야하는지 이해할 수 있다.
    - 단위 테스트가 무엇인지 이해할 수 있다.
    - JUnit의 기본적인 사용법을 이해할 수 있다.
    - 슬라이스 테스트가 무엇인지 이해할 수 있다.
    - Spring에서의 슬라이스 테스트 방법을 알 수 있다.
    - Hemcrest의 기본적인 사용법을 이해할 수 있다.

* 학습을 앞두고

    - 내일 할것도 모두 이해한다는 느낌으로 쭉 열심히하자.

* Daily Coding  

```java

```  
* 풀이  

### 학습시간 이후
* 오늘의 난이도


* 오늘의 정리

    - 단위 테스트(Unit Test) : 어떤 '단위'를 기준으로 테스트하는가?  
        - 기능 테스트 : 사용자 입장에서 애플리케이션 전체가 제공하는 기능에 대한 테스트. 연관된 기능(데이터베이스, HTTP)가 많아서 단위 테스트라고 부르기는 힘들다.   
        - 통합 테스트 : 클라이언트 측 툴 없이 개발자가 짜놓은 테스트 코드를 실행해서 전체 동작을 테스트하는 것. 역시 연관된 기능이 많아서 단위 테스트라고 부르기는 어렵다.  
        - *슬라이스 테스트* : 계층(API, 서비스, 데이터엑세스)별로 나누어 테스트하는 것. 범위가 많이 줄었고 Mock객체를 통한 테스트가 가능하지만 단위 테스트라고 하기엔 아직 크기에 부분 통합 테스트라고 부른다.  
        - **단위 테스트** : 최대한 독립적인 것이 좋고, 최대한 작은 단위인 것이 좋다. 따라서 **메서드**를 단위로 작성한다.  
        DB를 사용하더라도 테스트 전후로 동일하게 유지할 수 있다면 단위테스트라 할 수 있다.
    - Assertion : 예상하는 결과 값이 참이길 바라는 것. 단언문 혹은 단정문이라고도 한다.  
    - JUnit : 자바 언어로 만들어진 애플리케이션을 테스트 하기 위한 오픈 소스 테스트 프레임워크  
        - JUnit 5에 추가된 기능 
            - Assumption : 특정 조건을 가정해서 선택적으로 테스트할 수 있는 API
    - Hamcrest : JUnit 기반 단위 테스트에서 사용할 수 있는 Assertion Framework  
    가독성이 좋고 실패 메세지를 이해하기 쉽다.  

    
    - 슬라이스 테스트
    - ***API 계층 테스트*** : 대상은 Controller   
        ```java
        @SpringBootTest       // (1)
        @AutoConfigureMockMvc  // (2)
        public class ControllerTestDefaultStructure {
		    // (3)
            @Autowired
            private MockMvc mockMvc;
            //(4)
            @Test
            public void postMemberTest() {
              // given (
                //(5) 테스트용 request body 생성
              // when 
                //(6) MockMvc 객체로 테스트 대상 Controller 호출
              // then 
                //(7) Controller 핸들러 메서드에서 응답으로 수신한 HTTP Status 및 response body 검증 
            }
        }
        ```
        1. 스프링 부트 애플리케이션을 테스트하기 위한 Application Context 생성  
        2. Controller 테스트를 위한 자동 구성 작업. MockMvc를 사용하기 위해 필수적이다.
        3. 서버 없이 컨트롤러를 테스트할 수 있다.
        4. 핸들러 메서드 테스트 케이스
        5. 요청을 위한 request body생성
        6. URI, HTTP메서드 등을 지정하고 request
        7. 검증  
        ---
        
    - 데이터 엑세스 계층 테스트 : **DB의 상태를 테스트 케이스 실행 이전으로 되돌려서 깨끗하게 만들어야한다.**  
        대상은 당연히 Repository  
        @DataJpaTest 어노테이션을 사용하면 Repository의 기능을 정상적으로 사용하도록 자동으로 스프링이 Configuration을 해준다.  
        그리고 @Transaction 어노테이션을 포함하고있어서 테스트 종료시 자동으로 rollback된다.  
        


    - GSON - JSON 변환 라이브러리    
* 총평 
    - 오늘도 내용은 할만한데 실습이 어렵다  
   이번엔 레퍼런스코드를 참조했는데도 어렵다. 테스트코드가 뭐가저리 복잡한건지  
   열심히 매달리다 하루가 거의다 가버렸다
---