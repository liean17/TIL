# Day 50

## 코드스테이츠

### 1. 학습시간 전
* 오늘 학습목표

    - Spring Data JPA를 통해 데이터 엑세스 계층을 구현해본다  
    - 연관 관계 매핑 실습을 모두 완료한다.

* 학습을 앞두고

    - 오늘과 내일 두번의 페어를 앞두고 있다. 확실히 준비하자
    
* Daily Coding  
타일링 문제  
제한된 공간안에 특정 크기의 타일 몇개가 들어갈 수 있는지를 계산하는 문제다.
```java
public class Solution { 
	public int tiling(int num) {
		
		if(num==1) return 1;

		int[] arr = new int[num+1];

		arr[1] = 1;
		arr[2] = 2;

		for(int i = 3;i<=num;i++){
			arr[i] = arr[i-2] + arr[i-1];

		}

		return arr[num];
	}
}
```  
* 풀이  
놀랍게도 규칙이 존재했다.  
너비가 늘어날 수록 피보나치 수열 처럼 숫자가 늘어났다  
간단하게 풀었지만 복잡한 풀이방법을 떠올리지 못했기에 레퍼런스 코드를 봤다.  
타일을 놓으면서 좁아지는 공간을 재귀로 해결하는 코드였다  
복잡도는 높았지만 그런 방식으로도 해결할 수 있어야한다  
피보나치로 풀 수 있었던 것은 문제에 제약이 많아서였다.

### 학습시간 이후
* 오늘의 난이도

	- 중 : 모두 이해하려하면 상, 사용법만 익히면 중
* 오늘의 정리

	- Persist Context(영속성 컨텍스트)  
		- 1차 캐시 : Entity를 persist했을때 저장되는 곳
		- 쓰기 지연 SQL 저장소 : 이 곳에 있는 데이터는 commit을 실행했을때 데이터베이스에 저장된다.

	- 연관 관계 매핑  
		- 단방향 : 한 쪽 클래스만 다른 쪽의 참조정보를 가지고 있는 것. 따라서 참조정보가 없는 다른 한 쪽의 정보를 알 수 없다.
		- @OneToMany(단방향) : insert 할때 회원 정보가 없어 참조할 수가 없다. 그래서 마지막에 업데이트 문을 한번 더 날리게 된다. (비추천)  
		- @ManyToMany : 내부적으로 사이에 테이블을 만들어준다. 하지만 해당 테이블에는 외래키만 있기 때문에 다른 기타 정보를 넣을 수 없다. (비추천)
		- @ManyToOne : 많은 쪽에서 하나를 향한 관계이기 때문에 객체 정보와 @JoinColumn을 사용해 키(id)정보를 가진다.  
		- @OneToMany : 하나에서 많은 쪽을 향한 관계라서 객체 정보를 List로 받으며 mappedBy 애트리뷰트를 통해 참조할 외래키를 가리킨다.

		- mappedBy - 외래키 입장에서 생각하기

		
* 오늘 새롭게 배운 것

	- 시퀀스 전략과 아이덴티티 전략의 차이  
	시퀀스 : 시퀀스 테이블에서 **미리** 값을 생성해줌(commit 이전) - 일괄 저장 가능  
	아이덴티티 : 데이터가 **들어간 후**에 값이 생성(commit 이후)
* 오늘의 질문

	- 쓰기 지연 저장소란?  
	데이터 베이스에 저장하기 위한 준비상태. INSERT쿼리 형태로 등록된다. persist 호출시 1차 캐시에 객체가 저장됨과 동시에 함께 저장된다.
	- OneToMany 안쓰는 이유  
	단방향의 경우, 참조 관계에 대한 정보가 없기 때문에 추가로 update쿼리를 실행하게된다.
	- @NotNull과 @Column의 nullable차이 : 낫 널은 서비스에서 입력을 받을때, 컬럼에서는 데이터베이스에 저장하는 입장에서.

* 총평  

	- 사용법은 그냥 보고 따라하면 되기에 아는건데  
	왜, 무엇을, 언제 와 같은 질문을 하게되면 전혀 모르겠다  
	JPA의 핵심이라고 여겨지는 만큼 기초부터 확실하게 학습하자.

---
## 개인공부  

### 오늘의 목표
- 인스타그램 클론코딩 챕터 2 듣기

### 학습을 앞두고

- 애매한 것은 확실히 정리하자

### 학습 이후
* 오늘의 난이도

	- 하 : 나름 기초의 기초는 있나보다 모두 알고있는 내용이었다.

* 오늘 새롭게 배운 것

    - 단 30여분의 생각만으로 몰랐던 부분을 명확하게 할 수 있다는 사실
* 오늘의 질문

	- 연관 관계를 왜 그렇게 설정해야하는가? 애초에 왜 설정하는가? - 해결
* 총평 

	- 위의 오늘의 질문을 보면 대체 그동안 뭘 공부한건가 싶을수도 있는데  
	오늘 내가 궁금했던 부분을 정리하면 결국 위 질문이 된다  
	그냥 **그렇다고 하니까, 그런가보다** 하는 공부를 해왔다  
	차라리 모르면서 아는 척 하는건 모른다는 사실을 알고있기나 하지  
	그런가보다 하는 공부는 진짜 스스로 알고있다고 생각한다  
	그래서 누군가 혹은 스스로가 질문을 하지 않으면 무엇을 모르는지도 모른다  
	오늘 그런 위기를 느꼈고 산책을 하면서 생각을 정리하니 무엇을 모르는지, 무엇을 알고있는지 명확해졌다  
	그리곤 아는것을 조합해서 지식을 매우고, 모르는 것을 확실히 기억한 뒤에  
	뒤에 찾아보면서 매꿨다. 흘러가는 공부를 할 뻔 헀는데 다행히 충실한 하루가되었다  
	항상 스스로 점검하는 습관을 가져야겠다.
---