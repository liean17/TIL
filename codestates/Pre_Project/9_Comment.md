# 사전 프로젝트
## 시큐리티 도입을 위한 사전작업

### 학습을 앞두고
- 오늘의 목표   
Comment 추가, 검색구현 + 추가로 할 것 없는지 확인  

- 할게많지는 않다. 하지만 중요한것들이 남았다.  
일단 큰 기능부터 구현하면 될거다!  

### 트러블 슈팅
- 중복회원 검증 로직 오류  
```java
if(userRepository.findByUsername(userRequestDto.getUsername()).isPresent()){
    throw new RuntimeException("이미 존재하는 회원 아이디 입니다.");
}
```
위에서 중복을 확인하는 조건을 !=null 로 설정했더니 제대로 잡히지 않았다.  
이 오류는 인텔리J가 잡아줬는데, 내가 Optional로 설정해서 null여부로는 제대로 잡아주지않아서 그랬다.  

### 공부
- 세션  
컨트롤러에서 HttpServletRequest를 통해 세션에 정보를 저장하거나 가져올 수 있다.  
로그인의 경우 로그인 객체를 ```httpServletRequest.setAttribute(key,value)```의 형식으로 저장할 수 있다.  
그리고 가져오는 것도 어렵지않다. 특히 Spring의 @SesstionAttribute 어노테이션을 사용하면 간단하게 회원 객체를 가져올 수 있다.  
어노테이션을 설정해서 더 간단하게 가져오는 방법도있었는데 시큐리티로 변경할것이기에 이렇게만 사용하기로했다.


### 후기
- 세션!
이전까지 세션에서 로그인된 유저의 정보를 가져오는 것을 할 줄 몰라서 시큐리티에 의존하고 미뤄왔는데  
시큐리티없이 하는 법이 있다는 것은 알았고 배웠다는 기억도있지만 정확하게 할줄은 몰라서 미루고있었다.  
오늘 강의를 찾아보니 아주 간단하게 설명해주는 게 있어서 적용했다! 한번에 잘되서 기쁘다.  
역시 해야지 싶은건 얼른하는게 좋고, 모르는 것은 대부분 인터넷에있다.



