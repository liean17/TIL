# Open Session In View

### true(기본값)
- 유저에게 응답이 갈때까지 최대한 영속 상태를 유지한다.  
이 덕분에 지연로딩이 가능하다.
- 하지만 이 전략은 데이터베이스 커넥션 리소스를 너무 오래 사용하기 때문에 실시간 트래픽이 중요한 애플리케이션에서는 커넥션이 모자랄 수 있다.  
예를 들어 컨트롤러에서 외부 API를 호출하면 해당 대기시간 만큼 커넥션 리소스를 반환하지 못하고 유지해야한다.

### false
- 트랜잭션을 종료할 때 영속성 컨텍스트를 닫고, 데이터베이스 커넥션도 종료한다.  
- 지연로딩을 사용하기 곤란하다.
    - 모든 지연 로딩 코드를 트랜잭션 안으로 이동시켜야 한다.

### 커멘드와 쿼리 분리
- 트랜잭션안에서 사용할 서비스를 따로 만들기
    - 컨트롤러에서 사용되는 로직을 옮기면된다.
- 보통 비즈니스 로직은 특정 엔티티 몇개를 등록하거나 수정하는 것 이므로 성능에 크게 문제가 되지 않는다.  
주로 성능에 영향을 주는 것은 조회이기 때문에 이 둘의 관심사를 명확하게 분리하면 유지보수가 편하다.

### 켜야하는가, 꺼야하는가
- 고객 서비스의 실시간 API는 끄고, ADMIN 처럼 커넥션을 많이 사용하지 않는 곳은 켜는 것을 추천한다.


