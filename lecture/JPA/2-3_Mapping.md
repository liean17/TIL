# 다양한 연관관계 매핑

- 연관관계 매핑시 고려사항 3가지  
    1. 다중성(N:1,N:M...)
    2. 단방향, 양방향
    3. 연관관계의 주인

### 다대일 [N:1]
- 항상 다[N]에 외래키가 있어야한다.  
- 다대일의 양방향  
    - 외래 키가 있는 쪽이 연관관계의 주인
    - 양쪽을 서로 참조하도록 개발

### (비추천) 일대다 [1:N] 
- 일[1]이 연관관계의 주인이 되는 매핑
- 연관관계 관리를 위해 N에 대한 쿼리가 추가로 실행된다.
- @JoinColumn을 사용하지 않으면 조인 테이블 방식을 사용한다.  

### 일대일 [1:1]
- 주 테이블이나 대상 테이블 중에 외래키 선택 가능
- 대상 테이블에 외래키 단방향은 지원 X
- 자주 쓰이는 주 테이블에 외래키가 있는 것이 '일반적으로는' 사용하기 편하다.  
    - 값이 없으면 외래키에 null 을 허용해야한다는 단점이 존재한다.

### (비추천) 다대다 [N:M]
- 관계형 데이터베이스는 다대다 관계를 테이블 2개로 표현할 수 없다.  
- 하지만 객체는 컬렉션을 사용하면 가능해진다. @ManyToMany는 이를 위해 제공된다.  
- 연결 테이블이 단순히 연결만 하고 끝나는 일이없다.  
- 따라서 다대일, 일대다 관계로 풀어내고 중간 테이블을 엔티티화 하는것이 좋다.   
